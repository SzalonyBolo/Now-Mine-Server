<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="NowMine.MainWindow"
    xmlns:local="clr-namespace:NowMine.Queue"
    xmlns:data="clr-namespace:NowMine.Data"
    xmlns:view="clr-namespace:NowMine.View"
    Title="Now Mine!" Height="650" Width="1200" Closing="Window_Closing">

    <Window.Resources>
        <local:QueueManager x:Key="queueManager"/>
        <!--
        <ObjectDataProvider x:Key="queueManager" ObjectType="{x:Type QueueManager}" MethodName="get_Queue"></ObjectDataProvider>
        -->

        <DataTemplate x:Key="MusicDataTemplate" DataType="{x:Type data:MusicData}">
            <StackPanel>
                <view:MusicControl />
            </StackPanel>
        </DataTemplate>

        <ItemsPanelTemplate x:Key="SearchPanelTemplate">
            <StackPanel Orientation="Vertical" Margin="0,0,0,0"/>
        </ItemsPanelTemplate>

        <ItemsPanelTemplate x:Key="QueuePanelTemplate">
            <StackPanel Orientation="Horizontal" Margin="0,0,0,0"/>
        </ItemsPanelTemplate>
    </Window.Resources>
    
    <Grid x:Name="mainGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="375" x:Name="columnDefinitionSearch"/>
            <ColumnDefinition Width="*" x:Name="columnDefinitionPlayer"/>
        </Grid.ColumnDefinitions>

        <Grid x:Name="columnSearch" Grid.Column="0">
            <WrapPanel x:Name="searchButtons">
                <TextBox x:Name="txtSearch" Text="{Binding Path=SearchText}" VerticalAlignment="Top" Width="120" HorizontalAlignment="Center" GotFocus="txtSearch_GotFocus"/>
                <Button x:Name="searchButton" Content="Szukaj!" Width="75" Command="{Binding Path=SearchCommand}" FontSize="15" HorizontalAlignment="Right" IsEnabled="False"/>
                <!--<Button x:Name="playNextButton" Content="Next!" Width="75" HorizontalAlignment="Center" FontSize="15" Click="playNextButton_Click" IsEnabled="False"/>-->
            </WrapPanel>

            <ScrollViewer Margin="0,30,0, 0" >
                <StackPanel>
                    <ItemsControl HorizontalAlignment="Stretch"
                                  VerticalAlignment="Top"
                                  Margin="0,4,0,0"
                                  ItemsSource="{Binding Path=SearchList}"
                                  ItemTemplate="{StaticResource MusicDataTemplate}"
                                  ItemsPanel="{StaticResource SearchPanelTemplate}" />
                </StackPanel>
            </ScrollViewer>
        </Grid>

        <Grid x:Name="PlayerGrid" Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="*" />
                <RowDefinition Height="120"/>
            </Grid.RowDefinitions>
            <Grid x:Name="RowPlayer" Grid.Row="0">

            </Grid>

            <Grid x:Name="RowQueue" Grid.Row="1" >
                <ScrollViewer Margin="0,0,0,0" HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Hidden">
                    <StackPanel>
                        <ItemsControl HorizontalAlignment="Left"
                                      VerticalAlignment="Top"
                                      Margin="0,0,0,0"
                                      ItemsSource="{Binding Source={StaticResource queueManager}, Path=Queue}"
                                      ItemTemplate="{StaticResource MusicDataTemplate}"
                                      ItemsPanel="{StaticResource QueuePanelTemplate}" />
                    </StackPanel>
                </ScrollViewer>

                <!--
                <ScrollViewer x:Name="queueScroll">
                    <StackPanel x:Name="queueBoard" Orientation="Horizontal">
                        <ItemsControl ItemsSource="{Binding Source={StaticResource queueManager}, Path=Queue}">
                            
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <nm:MusicPiece></nm:MusicPiece>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </ScrollViewer>
                 -->
            </Grid>
        </Grid>
    </Grid>
</Window>
